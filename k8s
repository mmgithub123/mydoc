指定config
kubectl --kubeconfig=kube/config get ingress

kubectl get pods

kubectl describe pod pod-name -o wide

查看pod日志
kubectl logs pod-name (-n namespace-name)

指定容器执行命令
kubectl exec pod-name -c container-name useing-command

kubectl  exec -it pod-name -n namespace-name bash(sh or /bin/sh or /bin/bash)

查看yaml
kubectl get pod -n namespace-name -o yaml


----------------------------------------------------------------------------------------------
监控报警

pod状态：
Pending，  Running ， Succeeded ， Failed，Unknown

容器状态：
Waiting, Running, and Terminated

pod条件：
PodScheduled: the Pod has been scheduled to a node.
ContainersReady: all containers in the Pod are ready.
Initialized: all init containers have started successfully.
Ready: the Pod is able to serve requests and should be added to the load balancing pools of all matching Services.


Google在“SRE Handbook”中以“四个黄金信号”的概念为我们提供了一个论述：
Latency — 延迟
Traffic — 流量
Errors — 错误数
Saturation — 饱和度

Tom Wilkie解释RED方法为：
Rate：每秒的请求数。
Errors：失败的那些请求的数量。
Duration：这些请求所花费的时间。
USE方法用于资源，RED方法用于服务  — Tom Wilkie


cadvisor
metric-server
kube-state-metrics
node-exporter



---------------------------------------------------------------------------------------------------------------
指标：

Google在“SRE Handbook”中以“四个黄金信号”的概念为我们提供了一个论述：
Latency — 延迟
Traffic — 流量
Errors — 错误数
Saturation — 饱和度

Tom Wilkie解释RED方法为：
Rate：每秒的请求数。
Errors：失败的那些请求的数量。
Duration：这些请求所花费的时间。
USE方法用于资源，RED方法用于服务  — Tom Wilkie

告警名称
 并发用户数
 TPS（QPS） 
 响应时间（95RT或ART） 
 Error% 
 Full GC 
 线程池、任务队列 
异常重启
自定义事件
error log

告警名称	告警阈值	告警频率	告警等级
CPU使用率	平均值 >= 80%	持续3个周期 则告警 每1天告警一次	重要
CPU空闲时间占比	平均值 < 20%	持续3个周期 则告警 每1天告警一次	重要
5分钟平均负载	平均值 > 1.4 x cpu核数	持续3个周期 则告警 每1天告警一次	重要
内存使用率 	平均值 > 80%	持续3个周期 则告警 每1天告警一次	重要
inode已使用占比 	平均值 > 90%	持续3个周期 则告警 每1天告警一次	重要
磁盘使用率	平均值 > 90%	持续3个周期 则告警 每1天告警一次	重要
磁盘I/O使用率	平均值 > 90%	持续3个周期 则告警 每1天告警一次	重要
带内网络流出速率	平均值 > 90%	持续3个周期 则告警 每1天告警一次	重要
带内网络流入速率	平均值 > 90%	持续3个周期 则告警 每1天告警一次	重要


mysql:
告警名称	告警阈值	告警频率	告警等级
内存使用率  	原始值 > 90%	持续1个周期 则告警 每5分钟告警一次	紧急
缓冲池命中率  	原始值 <= 0.9 比率	持续1个周期 则告警 每5分钟告警一次	紧急
慢日志个数统计  	原始值 >= 100 个/分钟	持续1个周期 则告警 每5分钟告警一次	紧急
MDL锁数量  	原始值 >= 5 Count	持续1个周期 则告警 每5分钟告警一次	紧急
硬盘写耗时  	原始值 >= 10 毫秒	持续1个周期 则告警 每1天告警一次	紧急
当前活跃连接数  	原始值 >= 100 个	持续1个周期 则告警 每5分钟告警一次	紧急
磁盘利用率 	原始值 > 90%	持续1个周期 则告警 每5分钟告警一次	紧急
等待线程数  	原始值 >= 20 个数	持续1个周期 则告警 每5分钟告警一次	紧急
实时复制时延  	原始值 >= 60 秒	持续1个周期 则告警 每5分钟告警一次	紧急
硬盘读耗时  	原始值 >= 10 毫秒	持续1个周期 则告警 每5分钟告警一次	紧急
当前行锁等待数  	原始值 >= 10 个数	持续1个周期 则告警 每5分钟告警一次	紧急
CPU使用率 	原始值 > 85%	持续1个周期 则告警 每5分钟告警一次	紧急
连接数使用率 	原始值 >= 80%	持续1个周期 则告警 每5分钟告警一次	紧急
告警名称	告警阈值	告警频率	告警等级
连接数使用率 	原始值 >= 50%	持续3个周期 则告警 每5分钟告警一次	重要
数据库总连接数 	原始值 >= 400 个	持续3个周期 则告警 每5分钟告警一次	重要
内存使用率 	原始值 >= 80%	持续3个周期 则告警 每5分钟告警一次	重要
慢日志个数统计 	原始值 >= 50 个/分钟	持续3个周期 则告警 每5分钟告警一次	重要
缓冲池命中率 	原始值 <= 0.95 比率	持续3个周期 则告警 每5分钟告警一次	重要
TPS 	原始值 >= 2000 次/秒	持续3个周期 则告警 每5分钟告警一次	重要
磁盘利用率 	原始值 >= 80%	持续1个周期 则告警 每1天告警一次	重要
QPS 	原始值 >= 10000 次/秒	持续3个周期 则告警 每5分钟告警一次	重要
活跃连接数 	原始值 >= 50 个	持续3个周期 则告警 每5分钟告警一次	重要
CPU使用率 	原始值 >= 80%	持续3个周期 则告警 每5分钟告警一次	重要
平均复制时延 	原始值 >= 2 s	持续3个周期 则告警 每5分钟告警一次	重要


